
CREATE TABLE discovery.cirrus_index (
  `page_id` bigint,
  `auxiliary_text` array<string>,
  `category` array<string>,
  `content_model` string,
  `coordinates` array<struct<
      `coord`: map<string, double>,
      `country`:string,
      `dim`:bigint,
      `globe`:string,
      `name`:string,
      `primary`:boolean,
      `region`:string,
      `type`:string>>,
  `create_timestamp` string,
  `defaultsort` string,
  `descriptions` map<string, array<string>>,
  `external_link` array<string>,
  `extra_source` string,
  `file_bits` bigint,
  `file_height` bigint,
  `file_media_type` string,
  `file_mime` string,
  `file_resolution` bigint,
  `file_size` bigint,
  `file_text` string,
  `file_width` bigint,
  `heading` array<string>,
  `incoming_links` bigint,
  `labels` map<string, array<string>>,
  `language` string,
  `local_sites_with_dupe` array<string>,
  `namespace` bigint,
  `namespace_text` string,
  `opening_text` string,
  `outgoing_link` array<string>,
  `popularity_score` double,
  `redirect` array<struct<`namespace`:bigint,`title`:string>>,
  `source_text` string,
  `template` array<string>,
  `text` string,
  `text_bytes` bigint,
  `timestamp` string,
  `title` string,
  `version` bigint,
  `wikibase_item` string,
  `weighted_tags` array<string>,
  `statement_keywords` array<string>)
PARTITIONED BY (
  `cirrus_replica` string,
  `cirrus_group` string,
  `wiki` string,
  `snapshot` string)
STORED AS avro
LOCATION 'hdfs:///wmf/data/discovery/cirrus/index'
